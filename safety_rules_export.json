{
  "version": "1.0.0",
  "last_modified": "2026-02-01T18:22:03.470955",
  "global_enabled": true,
  "rules": [
    {
      "id": "Y_AXIS_BLOCKED",
      "name": "Y-Axis Blocked by Row Marker",
      "name_he": "ציר Y חסום על ידי סמן העמודות",
      "description": "Lines axis (Y-axis) cannot move if row marker is DOWN. Row marker lies across the lines axis when down, blocking movement.",
      "enabled": true,
      "priority": 10,
      "severity": "critical",
      "is_system_rule": true,
      "conditions": {
        "operator": "OR",
        "items": [
          {
            "type": "piston",
            "source": "row_marker",
            "operator": "equals",
            "value": "down"
          },
          {
            "type": "sensor",
            "source": "row_motor_limit_switch",
            "operator": "equals",
            "value": "down"
          }
        ]
      },
      "blocked_operations": [
        {
          "operation": "move_y",
          "exclude_setup": true
        }
      ],
      "message": "Cannot move Y-axis! Row marker is DOWN and blocks the lines axis. ACTION REQUIRED: Raise the row marker before Y-axis movement.",
      "message_he": "לא ניתן להזיז את ציר Y! סמן העמודות למטה וחוסם את ציר השורות. פעולה נדרשת: הרם את סמן העמודות.",
      "created_at": "2026-02-01T00:00:00Z",
      "created_by": "system_migration"
    },
    {
      "id": "LINES_DOOR_OPEN",
      "name": "Lines Operations Require Door Closed",
      "name_he": "פעולות שורות דורשות דלת סגורה",
      "description": "During lines operations (Y-axis movement, line_marker/line_cutter tools), the row marker must be UP (door closed) for safety. Lines motor operates with door closed to prevent damage.",
      "enabled": true,
      "priority": 20,
      "severity": "critical",
      "is_system_rule": true,
      "conditions": {
        "operator": "OR",
        "items": [
          {
            "type": "piston",
            "source": "row_marker",
            "operator": "equals",
            "value": "down"
          },
          {
            "type": "sensor",
            "source": "row_motor_limit_switch",
            "operator": "equals",
            "value": "down"
          }
        ]
      },
      "blocked_operations": [
        {
          "operation": "move_y",
          "exclude_setup": true
        },
        {
          "operation": "tool_action",
          "tools": [
            "line_marker",
            "line_cutter"
          ],
          "exclude_setup": false
        }
      ],
      "message": "Lines operation blocked! Row marker must be UP during lines operations. Close the rows door (raise marker).",
      "message_he": "פעולת שורות חסומה! סמן העמודות חייב להיות למעלה במהלך פעולות שורות. סגור את דלת העמודות.",
      "created_at": "2026-02-01T00:00:00Z",
      "created_by": "system_migration"
    },
    {
      "id": "ROWS_DOOR_CLOSED",
      "name": "Rows Door Position Requirement",
      "name_he": "דרישת מיקום דלת עמודות",
      "description": "Door can only be CLOSED (limit switch DOWN) when Y motor is at position 0. Closing door with Y motor not at home position could cause collision or damage.",
      "enabled": true,
      "priority": 30,
      "severity": "critical",
      "is_system_rule": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {
            "type": "sensor",
            "source": "row_motor_limit_switch",
            "operator": "equals",
            "value": "down"
          },
          {
            "type": "position",
            "source": "y_position",
            "operator": "not_equals",
            "value": 0
          }
        ]
      },
      "blocked_operations": [
        {
          "operation": "move_x",
          "exclude_setup": true
        },
        {
          "operation": "tool_action",
          "tools": [
            "row_marker",
            "row_cutter"
          ],
          "exclude_setup": false
        }
      ],
      "message": "Rows motor door closed while Y-axis not at home! Y position must be 0cm to close door. Open the rows motor door.",
      "message_he": "דלת מנוע העמודות סגורה כשציר Y לא בבית! מיקום Y חייב להיות 0 לסגירת הדלת.",
      "created_at": "2026-02-01T00:00:00Z",
      "created_by": "system_migration"
    }
  ],
  "available_sources": {
    "pistons": [
      "row_marker",
      "row_cutter",
      "line_marker",
      "line_cutter",
      "line_motor"
    ],
    "sensors": [
      "row_marker_up_sensor",
      "row_marker_down_sensor",
      "row_cutter_up_sensor",
      "row_cutter_down_sensor",
      "line_marker_up_sensor",
      "line_marker_down_sensor",
      "line_cutter_up_sensor",
      "line_cutter_down_sensor",
      "line_motor_left_up_sensor",
      "line_motor_left_down_sensor",
      "line_motor_right_up_sensor",
      "line_motor_right_down_sensor",
      "x_left_edge_sensor",
      "x_right_edge_sensor",
      "y_top_edge_sensor",
      "y_bottom_edge_sensor",
      "row_motor_limit_switch",
      "door_sensor"
    ],
    "positions": [
      "x_position",
      "y_position"
    ]
  },
  "available_operations": [
    "move_x",
    "move_y",
    "move_position",
    "tool_action",
    "wait_sensor"
  ],
  "available_tools": [
    "line_marker",
    "line_cutter",
    "line_motor",
    "row_marker",
    "row_cutter"
  ]
}